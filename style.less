/*
 * ls-plugin-extra-tags (https://www.wpvs.de)
 * © 2020 – 2022 Dennis Schulmeister-Zimolong <dennis@pingu-mail.de>
 * Licensed under the 2-Clause BSD License.
 */

/**
 * Quizzes
 */
.lsx-quiz {
    @answer-color-text:    rgb(80, 80, 80);
    @answer-color-button:  rgb(80, 80, 80);
    @answer-color-hover:   rgb(31, 124, 212);
    @status-color-correct: rgb(49, 116, 52);
    @status-color-partial: rgb(255, 176, 0);
    @status-color-wrong:   rgb(149, 46, 46);

    @padding: 0.25em 0 0.25em 0;

    // Set up three column grid layout
    display: grid;
    grid-template-columns: [score] 5.5em [main] auto [end];
    justify-content: stretch;
    align-items: stretch;
    grid-row-gap: 0;
    overflow: scroll;

    & > * {
        padding: @padding;
    }

    .hidden {
        display: none;
    }

    // First column: score and correction marks
    .lsx-quiz-column-score {
        grid-column-start: score;
        grid-column-end: main;

        background: rgba(255,255,255, 0.66);

        border: 0px solid rgba(0,0,0, 0.25);
        border-left-width: 1px;
        border-right-width: 1px;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: @padding;
        margin-right: 0.75em;

        .lsx-quiz-icon {
            font-size: 70%;
        }
    }

    &[data-score-visible='false'] {
        grid-template-columns: [score] 0 [main] auto [end];

        .lsx-quiz-column-score {
            display: none;
        }
    }

    .lsx-quiz-border-top {
        border-top-width: 1px;
    }

    .lsx-quiz-border-bottom {
        border-bottom-width: 1px;
    }

    .lsx-exercise-points {
        font-weight: bold;
        font-size: 0.8em;
    }

    .lsx-question-points {
        color: grey;
        font-size: 0.65em;
    }

    .lsx-quiz-total-points {
        font-size: 0.7em;
    }

    .lsx-quiz-total-percentage {
        border: 0px solid rgba(0,0,0, 0.25);
        border-top-width: 1px;
        font-weight: bold;

        width: 100%;
        text-align: center;
    }

    // Second row: Quiz content
    .lsx-quiz-column-main {
        grid-column-start: main;
        grid-column-end: end;
    }

    .lsx-quiz-controls {
        display: flex;
        align-items: center;
    }

    .lsx-quiz-question {
        font-weight: bold;
    }

    .lsx-quiz-hint {
        font-size: 80%;
        font-style: italic;
    }

    .lsx-quiz-question-line {
        display: flex;
        flex-direction: column;
        justify-content: start;
        gap: 1em;

        // Bootstrap: Tablet
        @media (min-width: 768px) {
            flex-direction: row;
        }
    }

    // Correction marks
    .lsx-quiz-highlight-partial {
        text-decoration: underline wavy;
        text-decoration-color: @status-color-partial;
    }

    .lsx-quiz-highlight-wrong {
        text-decoration: underline wavy;
        text-decoration-color: @status-color-wrong;
    }

    .__lspet__icon-checkmark {
        color: @status-color-correct !important;
    }

    .__lspet__icon-checkmark2 {
        color: @status-color-partial !important;
    }

    .__lspet__icon-cross {
        color: @status-color-wrong !important;
    }

    // Multiple-choice questions
    .lsx-quiz-choice-answer {
        display: flex;
        align-items: center;

        .lsx-quiz-choice-button {
            width: 1.25rem;
            flex-shrink: 0;

            font-size: 70%;
            color: @answer-color-button;
        }
    
        &[data-enabled="true"]:hover {
            cursor: pointer;
            color: @answer-color-hover;

            .lsx-quiz-choice-button {
                color: @answer-color-hover;
            }
        }
    }

    // Assignment questions
    .lsx-quiz-assignment {
        display: flex;
        gap: 0.5em;
        width: 100%;

        color: @answer-color-text;

        &.select-position-before { flex-direction: row-reverse; justify-content: flex-end; }
        &.select-position-after  { flex-direction: row; }
        &.select-position-above  { flex-direction: column-reverse; padding-bottom: 1em; }
        &.select-position-below  { flex-direction: column; padding-bottom: 1em;}

        .dropdown-toggle {
            overflow: hidden;
            white-space: normal;
            word-wrap: break-word;
            hyphens: auto;
            text-overflow: ellipsis;
            text-align: left;
        }

        .lsx-quiz-assignment-expected {
            font-size: 70%;
            font-style: italic;
            color: @status-color-wrong;
        }
    }

    // Gap-text questions
    .lsx-quiz-gap-text {
        font-size: 90%;

        &[data-mode="source-code"] {
            font-family: monospace;
        }

        .lsx-quiz-gap-text-input {
            color: @answer-color-text;
            background: none;
            border: 0px solid @answer-color-text;
            border-bottom-width: 1px;
        }

        .lsx-quiz-gap-text-expected {
            font-size: 70%;
            font-style: italic;
            color: @status-color-wrong;
        }
    }

    // Free-text questions
}
